{% extends "mainapp/base.html" %}
{% load static %}

{% block title %}Rejestracja · Magazyn{% endblock title %}

{% block content %}
<section class="min-vh-100 d-flex align-items-center bg-dark text-light position-relative overflow-hidden" data-bs-theme="dark">
  <div class="position-absolute top-0 start-0 w-100 h-100 hero-bg opacity-75"></div>

  <div class="container position-relative">
    <div class="row justify-content-center">
      <div class="col-12 col-md-10 col-lg-7">
        <div class="card glass border-0 rounded-4 shadow-lg animate-fade">
          <div class="card-body p-4 p-lg-5">

            <div class="text-center mb-4">
              <h1 class="h3 fw-bold mb-1">Załóż konto</h1>
              <p class="text-secondary mb-0">Dostęp do wszystkich modułów systemu Magazyn</p>
            </div>

            {# UI-only: bez backendu. Formularz ma client-side walidację Bootstrap. #}
            <form method="post" action="" class="needs-validation" novalidate>
              {% csrf_token %}

              <div class="row g-3">
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="id_first_name" placeholder="Imię">
                    <label for="id_first_name">Imię (opcjonalnie)</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="id_last_name" placeholder="Nazwisko">
                    <label for="id_last_name">Nazwisko (opcjonalnie)</label>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-floating">
                    <input type="email" class="form-control" id="id_email" placeholder="email@przyklad.pl" required>
                    <label for="id_email">E-mail</label>
                    <div class="invalid-feedback">Podaj poprawny adres e-mail.</div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="id_username" placeholder="Nazwa użytkownika" required>
                    <label for="id_username">Nazwa użytkownika</label>
                    <div class="invalid-feedback">To pole jest wymagane.</div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-floating mb-2">
                    <input type="password" class="form-control" id="id_password1" placeholder="Hasło" required>
                    <label for="id_password1">Hasło</label>
                    <div class="invalid-feedback">Wpisz hasło.</div>
                  </div>
                  <small class="text-secondary">Min. 8 znaków, zalecane litery i cyfry.</small>
                </div>

                <div class="col-12">
                  <div class="form-floating">
                    <input type="password" class="form-control" id="id_password2" placeholder="Powtórz hasło" required>
                    <label for="id_password2">Powtórz hasło</label>
                    <div class="invalid-feedback">Powtórz hasło.</div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-check mt-2">
                    <input class="form-check-input" type="checkbox" value="1" id="id_terms" required>
                    <label class="form-check-label" for="id_terms">
                      Akceptuję regulamin i politykę prywatności
                    </label>
                    <div class="invalid-feedback">Zaakceptuj warunki, aby kontynuować.</div>
                  </div>
                </div>
              </div>

              <div class="d-grid mt-4">
                <button type="submit" class="btn btn-primary btn-lg">Zarejestruj się</button>
              </div>
            </form>

            <div class="text-center mt-4">
              <span class="text-secondary">Masz już konto?</span>
              <a href="/account/login/" class="link-light link-underline-opacity-25 link-underline-opacity-100-hover">
                Zaloguj się
              </a>
            </div>

            <div class="text-center mt-4">
              <a href="/" class="btn btn-outline-light btn-sm">← Wróć</a>
            </div>
          </div>
        </div>

        <p class="text-center text-secondary mt-4 mb-0 small">
          Python &amp; Django · UI: Bootstrap 5.3 · &copy; 2025
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  // Bootstrap client-side validation (z dokumentacji)
  (function () {
    'use strict';
    const forms = document.querySelectorAll('.needs-validation');
    Array.prototype.slice.call(forms).forEach(function (form) {
      form.addEventListener('submit', function (event) {
        // UI-only: zablokuj faktyczny submit
        event.preventDefault();
        if (!form.checkValidity()) {
          event.stopPropagation();
        } else {
          // Możesz pokazać toast/alert, że to tylko UI (bez backendu)
          alert('Demo rejestracji (UI). Backend zostanie dodany później.');
        }
        form.classList.add('was-validated');
      }, false);
    });
  })();
</script>
{% endblock content %}
