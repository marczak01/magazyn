{% extends "mainapp/base.html" %}
{% load static %}

{% block title %}Magazyn â€” Strona gÅ‚Ã³wna{% endblock title %}

{% block content %}
<!-- Ciemny hero na peÅ‚nÄ… wysokoÅ›Ä‡ -->
<section class="min-vh-100 d-flex align-items-center bg-dark text-light position-relative overflow-hidden" data-bs-theme="dark">
  <div class="position-absolute top-0 start-0 w-100 h-100 hero-bg opacity-75"></div>

  <div class="container position-relative">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-9 text-center animate-fade">
        <h1 class="display-4 fw-bold lh-1">Witaj w systemie Magazyn</h1>
        <p class="lead text-secondary mt-3 mb-4">
          ZarzÄ…dzaj produktami, zamÃ³wieniami i raportami w jednym miejscu
        </p>

        <div class="d-flex justify-content-center">
          <!-- Otwiera modal logowania/rejestracji -->
          <button class="btn btn-lg btn-primary px-5 shadow"
                  data-bs-toggle="modal" data-bs-target="#authModal">
            Rozpocznij pracÄ™
          </button>
        </div>
      </div>
    </div>

    <!-- Prezentacja moduÅ‚Ã³w (informacyjnie, bez przejÅ›cia) -->
    <div class="row g-4 mt-5">
      <div class="col-12 col-md-4">
        <div class="card glass h-100 text-light">
          <div class="card-body p-4">
            <h5 class="card-title mb-2">ðŸ“¦ Produkty</h5>
            <p class="card-text text-secondary mb-0">
              Kartoteki, EAN, ceny detaliczne/hurtowe i specyfikacje.
            </p>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="card glass h-100 text-light">
          <div class="card-body p-4">
            <h5 class="card-title mb-2">ðŸ›’ ZamÃ³wienia</h5>
            <p class="card-text text-secondary mb-0">
              Rezerwacje, realizacja i statusy wysyÅ‚ki.
            </p>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="card glass h-100 text-light">
          <div class="card-body p-4">
            <h5 class="card-title mb-2">ðŸ“Š Raporty</h5>
            <p class="card-text text-secondary mb-0">
              SprzedaÅ¼, stany i rotacja produktÃ³w.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Stopka informacji + copyright -->
    <div class="text-center text-secondary mt-5">
      <small>Python &amp; Django Â· UI: Bootstrap 5.3 Â· &copy; 2025</small>
    </div>
  </div>
</section>

<!-- Modal: logowanie / link do rejestracji -->
<div class="modal fade" id="authModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-light" data-bs-theme="dark">
      <div class="modal-header border-0">
        <h5 class="modal-title">Zaloguj siÄ™</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Zamknij"></button>
      </div>
      <div class="modal-body pt-0">
        {% if messages %}
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }} mb-3" role="alert">{{ message }}</div>
          {% endfor %}
        {% endif %}

        <form method="post" action="{% url 'account:login' %}" class="needs-validation" novalidate>
          {% csrf_token %}
          <input type="hidden" name="next" value="{% url 'account:dashboard' %}">
          <div class="form-floating mb-3">
            <input type="text" class="form-control" id="id_username" name="username" placeholder="Nazwa uÅ¼ytkownika" required autofocus>
            <label for="id_username">Nazwa uÅ¼ytkownika</label>
          </div>
          <div class="form-floating mb-3">
            <input type="password" class="form-control" id="id_password" name="password" placeholder="HasÅ‚o" required>
            <label for="id_password">HasÅ‚o</label>
          </div>
          <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-lg">Zaloguj siÄ™</button>
          </div>
        </form>

        <div class="text-center mt-4">
          <span class="text-secondary">Nie masz konta?</span>
          <a href="/account/register/" class="link-light link-underline-opacity-25 link-underline-opacity-100-hover">Zarejestruj siÄ™</a>
        </div>
      </div>
      <div class="modal-footer border-0">
        <small class="text-secondary">ðŸ”’ DostÄ™p do moduÅ‚Ã³w zostanie odblokowany po zalogowaniu.</small>
      </div>
    </div>
  </div>
</div>

{# Gdy sÄ… komunikaty (np. bÅ‚Ä…d logowania), otwÃ³rz modal od razu #}
{% if messages %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    new bootstrap.Modal(document.getElementById('authModal')).show();
  });
</script>
{% endif %}
{% endblock content %}